{% extends "layout.html" %}

{% block content %}
    <h2 class="my-4 text-center" style="font-size: 36px; color: #ffffff;">تعديل المشروع</h2>
    <div class="container" dir="rtl">
        <form method="POST" action="{{ url_for('edit_project') }}" class="mb-4" style="background-color: #343a40; padding: 20px; border-radius: 10px;">
            <div class="mb-3">
                <label class="form-label fw-bold" style="font-size: 20px; color: #007bff;">اسم المشروع:</label>
                <input type="text" name="اسم_المشروع" class="form-control form-control-lg" required placeholder="أدخل اسم المشروع" style="border-radius: 10px; font-size: 20px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);">
            </div>
            <button type="submit" class="btn btn-primary w-100 btn-lg" style="border-radius: 10px; font-size: 20px;">بحث</button>
        </form>

        {% if مشاريع %}
            <h3 class="mt-4" style="font-size: 28px; color: #ffffff;">نتائج البحث:</h3>
            <div class="row">
                {% for project in مشاريع %}
                    <div class="col-12 col-md-12">
                        <form method="POST" action="{{ url_for('update_project') }}" class="p-4 border rounded shadow-sm mb-4" style="background-color: #495057;">

                            <input type="hidden" name="project_id" value="{{ project['id'] }}">

                            <h4 class="mb-3" style="color: #ffffff;">تفاصيل المشروع</h4>

                            <!-- اسم المشروع -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">اسم المشروع:</label>
                                <input type="text" name="المشروع" class="form-control" value="{{ project['المشروع'] }}" required style="font-size: 18px;">
                            </div>

                            <!-- المحافظة -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">المحافظة:</label>
                                <input type="text" name="المحافظة" class="form-control" value="{{ project['المحافظة'] }}" required style="font-size: 18px;">
                            </div>

                            <!-- مدرج في وزارة التخطيط -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">مدرج في وزارة التخطيط:</label>
                                <input type="text" name="مدرج_في_وزارة_التخطيط" class="form-control" value="{{ project['مدرج_في_وزارة_التخطيط'] }}" style="font-size: 18px;">
                            </div>

                            <!-- مؤشر لدى وزارة المالية -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">مؤشر لدى وزارة المالية:</label>
                                <input type="text" name="مؤشر_لدى_وزارة_المالية" class="form-control" value="{{ project['مؤشر_لدى_وزارة_المالية'] }}" style="font-size: 18px;">
                            </div>

                            <!-- الكلفة الكلية -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">الكلفة الكلية:</label>
                                <input type="number" name="الكلفة_الكلية" class="form-control" value="{{ project['الكلفة_الكلية'] }}" step="0.01" required style="font-size: 18px;">
                            </div>

                            <!-- الاستثناء من أساليب التعاقد -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">الاستثناء من أساليب التعاقد:</label>
                                <input type="text" name="الاستثناء_من_أساليب_التعاقد" class="form-control" value="{{ project['الاستثناء_من_أساليب_التعاقد'] }}" style="font-size: 18px;">
                            </div>

                            <!-- استثناء -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">استثناء:</label>
                                <input type="text" name="استثناء" class="form-control" value="{{ project['استثناء'] }}" style="font-size: 18px;">
                            </div>

                            <!-- الإعلان -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">تاريخ الإعلان:</label>
                                <input type="date" name="الإعلان" class="form-control" value="{{ project['الإعلان'] }}" style="font-size: 18px;">
                            </div>

                            <!-- دراسة سيرة ذاتية -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">دراسة السيرة الذاتية:</label>
                                <input type="checkbox" name="دراسة_سيرة_ذاتية" class="form-check-input" {% if project['دراسة_سيرة_ذاتية'] %} checked {% endif %} style="font-size: 18px;">
                            </div>

                            <!-- الدعوات -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">الدعوات:</label>
                                <input type="checkbox" name="الدعوات" class="form-check-input" {% if project['الدعوات'] %} checked {% endif %} style="font-size: 18px;">
                            </div>

                            <!-- الوثيقة القياسية -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">الوثيقة القياسية:</label>
                                <input type="checkbox" name="الوثيقة_القياسية" class="form-check-input" {% if project['الوثيقة_القياسية'] %} checked {% endif %} style="font-size: 18px;">
                            </div>

                            <!-- التخويل -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">التخويل:</label>
                                <input type="checkbox" name="التخويل" class="form-check-input" {% if project['التخويل'] %} checked {% endif %} style="font-size: 18px;">
                            </div>

                            <!-- تاريخ غلق الدعوات -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">تاريخ غلق الدعوات:</label>
                                <input type="date" name="تاريخ_غلق_الدعوات" class="form-control" value="{{ project['تاريخ_غلق_الدعوات'] }}" style="font-size: 18px;">
                            </div>

                            <!-- لجان الفتح -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">لجان الفتح:</label>
                                <input type="checkbox" name="لجان_الفتح" class="form-check-input" {% if project['لجان_الفتح'] %} checked {% endif %} style="font-size: 18px;">
                            </div>

                            <!-- لجنة التحليل -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">لجنة التحليل:</label>
                                <input type="text" name="لجنة_تحليل" class="form-control" value="{{ project['لجنة_تحليل'] }}" style="font-size: 18px;">
                            </div>

                            <!-- قرار لجنة التحليل إلى دائرة العقود -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">قرار لجنة التحليل:</label>
                                <input type="date" name="قرار_لجنة_التحليل_الى_دائرة_العقود" class="form-control" value="{{ project['قرار_لجنة_التحليل_الى_دائرة_العقود'] }}" style="font-size: 18px;">
                            </div>

                            <!-- لجنة المراجعة والمصادقة -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">لجنة المراجعة والمصادقة:</label>
                                <input type="text" name="لجنة_المراجعة_والمصادقة" class="form-control" value="{{ project['لجنة_المراجعة_والمصادقة'] }}" style="font-size: 18px;">
                            </div>

                            <!-- الإحالة -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">الإحالة:</label>
                                <input type="text" name="الإحالة" class="form-control" value="{{ project['الإحالة'] }}" style="font-size: 18px;">
                            </div>

                            <!-- مسودة العقد -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">مسودة العقد:</label>
                                <input type="text" name="مسودة_العقد" class="form-control" value="{{ project['مسودة_العقد'] }}" style="font-size: 18px;">
                            </div>

                            <!-- توقيع العقد -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">تاريخ توقيع العقد:</label>
                                <input type="date" name="توقيع_العقد" class="form-control" value="{{ project['توقيع_العقد'] }}" style="font-size: 18px;">
                            </div>

                            <!-- ملاحظات -->
                            <div class="mb-3">
                                <label class="form-label fw-bold" style="color: #ffffff;">ملاحظات:</label>
                                <textarea name="ملاحظات" class="form-control" rows="4" style="font-size: 18px;">{{ project['ملاحظات'] }}</textarea>
                            </div>

                            <button type="submit" class="btn btn-success w-100 btn-lg" style="border-radius: 10px; font-size: 20px;">حفظ التعديلات</button>
                        </form>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="alert alert-warning">⚠️ لا توجد مشاريع للعرض.</p>
        {% endif %}
    </div>
{% endblock %}
